<ion-header>
  <app-header [title]="title">
  </app-header>
</ion-header>

<ion-content>


  <ion-card class="ion-margin-top">
    <ion-card-header class="" color="warning">
      <ion-card-title>
        <strong *ngIf="loadedUU; else noNumber">Unapproved Users: {{numberUnapproved}}</strong>
        <ng-template #noNumber><strong>Unapproved Users</strong></ng-template>
      </ion-card-title>
    </ion-card-header>

    <ion-button *ngIf="!loadedUU; else hideUnapproved" class="submit-btn ion-no-margin" expand="full" type="button"
                (click)="showUnapprovedUsers()" color="dark">
      <ion-icon slot="start" name="arrow-dropdown"></ion-icon>
      Show
    </ion-button>
    <ng-template #hideUnapproved>
      <ion-button class="submit-btn ion-no-margin" expand="full" type="button" (click)="hideUnapprovedUsers()"
                  color="dark">
        <ion-icon slot="start" name="arrow-dropup"></ion-icon>
        Hide
      </ion-button>
    </ng-template>

    <ion-card-content>
      <ion-list *ngIf="loadedUU">
        <ion-list-header *ngIf="numberUnapproved > 0">
          The following users are waiting for approval:
        </ion-list-header>
        <ion-list-header *ngIf="numberUnapproved === 0">
          No users are waiting for approval.
        </ion-list-header>

        <ion-item *ngFor="let user of unapprovedUsers">
          <ion-avatar slot="start">
            <img src="../../../assets/person_add-24px.svg" alt="basic avatar">
          </ion-avatar>
          <ion-label>
            <h2>{{user.getFullName()}}</h2>
            <h3>{{user.email}}</h3>
            <p>{{'ID: ' + user.id}}</p>
          </ion-label>
          <ion-toggle slot="end" color="warning" (ionChange)="approveUser(user.id, user.email)"></ion-toggle>
        </ion-item>

      </ion-list>
    </ion-card-content>
  </ion-card>

  <ion-card class="ion-margin-top">
    <ion-card-header class="" color="success">
      <ion-card-title>
        <strong *ngIf="loadedAU; else elseBlock">Approved Users: {{numberApproved}}</strong>
        <ng-template #elseBlock><strong>Approved Users</strong></ng-template>
      </ion-card-title>
    </ion-card-header>

    <ion-button *ngIf="!loadedAU; else hideApproved" class="submit-btn ion-no-margin" expand="full" type="button"
                (click)="showApprovedUsers()" color="dark">
      <ion-icon slot="start" name="arrow-dropdown"></ion-icon>
      Show
    </ion-button>
    <ng-template #hideApproved>
      <ion-button class="submit-btn  ion-no-margin" expand="full" type="button" (click)="hideApprovedUsers()"
                  color="dark">
        <ion-icon slot="start" name="arrow-dropup"></ion-icon>
        Hide
      </ion-button>
    </ng-template>


    <ion-card-content>
      <ion-list *ngIf="loadedAU">
        <ion-list-header *ngIf="numberApproved > 0">
          The following users have already been approved:
        </ion-list-header>
        <ion-list-header *ngIf="numberApproved === 0">
          No user has been approved.
        </ion-list-header>

        <ion-item *ngFor="let user of approvedUsers">
          <ion-avatar slot="start">
            <img src="../../../assets/verified_user-24px.svg" alt="verified avatar">
          </ion-avatar>
          <ion-label>
            <h2>{{user.getFullName()}}</h2>
            <h3>{{user.email}}</h3>
            <p>{{'ID: ' + user.id}}</p>
          </ion-label>
          <ion-icon slot="end" name="checkmark" color="success"></ion-icon>
        </ion-item>

      </ion-list>
    </ion-card-content>
  </ion-card>

</ion-content>
